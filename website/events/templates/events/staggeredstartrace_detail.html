{% extends "events/base.html" %}
{% load i18n %}
{% load bootstrap3 %}
{% load widget_tweaks %}

{% block title %}{{ object.track }} {% endblock %}
{% block content %}

  <div class="hidden" id="event_status">{{ object.status }}</div>
  <div class="hidden" id="json_url">{{ object.json_url }}</div>


  <h1><small>{{ object.laps }} laps on </small>{{ object.track }} <small>[{{ object.track.platform }}] hosted by {{ object.host }}</small></h1>

  <div id="loading" class="row text-center">
    <button class="btn btn-lg btn-info"><span class="glyphicon glyphicon-refresh glyphicon-refresh-animate"></span> Loading...</button>
  <img src="/static/green_light.png" class="hide" alt=""/>
  <img src="/static/red_light.png" class="hide" alt=""/>

  </div>

  <div id="twocols" class="row" style="display:none">
    <div class="col-md-6">

      {% if request.user.username == object.host.username %}
        {% include "events/host_detail_snippet.html" %}
      {% else %}
        {% include "events/participant_detail_snippet.html" %}
      {% endif %}
    </div>

    <div class="col-md-6">
      <div class="alert alert-info">
        <h4 class="text-center"><span class="glyphicon glyphicon-alert" aria-hidden="true"></span>
          This one's important!
          <span class="glyphicon glyphicon-alert" aria-hidden="true"></span></h4>
        <p>You will <b>not</b> hear the sound of the start signal if you minimize
          your browser window, so <b>keep it open</b> in the background!
          Do <b>not</b> click on the little "_" icon of the browser window's upper right corner!</p>
        <p>Also, this feature has only been tested in Chrome, Firefox and Chromium browsers.
          Use at your own risk in other browsers like Internet Explorer etc.</p>
      </div>

     {% include "events/enlist_form.html" %}
      <table class="table table-bordered table-condensed" id="participants">
        <thead>
        <tr class="info">
          <td class="col-md-1">&nbsp;</td>
          <td class="col-md-2">Player</td>
          <td class="col-md-3">Vehicle</td>
        </tr>
        </thead>
        <tbody id="participantsbody">
        </tbody>
      </table>

    </div>
  </div>

  <div id="racescreen" style="display:none">
  <table class="table table-bordered table-condensed" id="participants">
    <thead>
    <tr class="info">
      <td class="col-md-1">&nbsp;</td>
      <td class="col-md-2">Player</td>
      <td class="col-md-3">Vehicle</td>
    </tr>
    </thead>
    <tbody id="racebody">
    </tbody>
  </table>
  </div>

<div id="resultform" style="display:none">
  <form action="." method="post">
    {% csrf_token %}
    <h1>One little thing to do...</h1>
    <p>After the race please tell me your best lap time: <input type="text" name="personal_laptime">
      (MM:SS.milli)</p>
    <button type="submit" class="btn btn-primary">Save</button>
  </form>
</div>
{% endblock %}
{% block trax_extra_script %}
  <script src="/static/serverdate.js"></script>
  <script src="/static/mespeak/mespeak.js"></script>
  <script src="/static/staggeredstart.js"></script>
{% endblock %}
